(function(d){var b;function i(a,c){d.fn[a]=function(a){var f=!1;if("object"===typeof a||!a)f=[a],a="init";else if(c[a])f=Array.prototype.slice.call(arguments,1);else return d.error("Method "+a+" does not exist on jQuery."+b),this;return this.each(function(){c[a].apply(d(this),f)})}}b="dialogTooltip";var j={arrow:".arrow",actions_holder:".actions"},h={dialog:!1,buttons:[]},e={init:function(a){var c=this,a=d.extend(j,a),a={settings:a,actions_holder:d(a.actions_holder,this),arrow:d(a.arrow),holder:this.parent(),
documentClick:function(a){0<c.find("*").andSelf().filter(a.target).length||(e.unbindHide.call(c),e.hide.call(c))}};h.dialog=this;this.data(b,a);this.detach()},destroy:function(){this.removeData(b);this.off(b)},show:function(a,c){c||(c=a.offset());this.data(b).target=a;this.detach().appendTo(document.body);e.bindHide.call(this);e.reposition.call(this,c);e.trigger_event.call(this,"show")},reposition:function(a){var c=this.data(b).arrow,c={top:a.top-this.outerHeight()-c.outerHeight(),left:a.left-c.position().left};
this.offset(c);e.trigger_event.call(this,"repositioned",{offset:c,anchor_offset:a})},hide:function(){var a=this.data(b);this.detach().appendTo(a.holder);e.trigger_event.call(this,"hide");this.data(b).target=null},setupButtons:function(a){var c=this.data(b).actions_holder;c.html("");for(var g in a){var f=a[g];if("string"==typeof f&&(f=d.fn[b].buttons[f],!f)){d.error(b+" "+f+" button does not exists");continue}e.setupButton.call(this,c,f)}},setupButton:function(a,c){var b=this;d('<a href="#" class="button" />').addClass(c.id).html(c.label).click(function(a){a.preventDefault();
a=!0;c.action&&(a=c.action(b));e.trigger_event.call(b,"action."+c.id,{close:a});a&&e.hide.call(b)}).appendTo(a)},trigger_event:function(a,c){this.add(this.data(b).target).trigger(b+"."+a,c)},bindHide:function(){d(document).bind("click",this.data(b).documentClick)},unbindHide:function(){d(document).unbind("click",this.data(b).documentClick)}},g={init:function(a){a=d.extend(h,a);a={settings:a,dialog:d(a.dialog)};g.bind.call(this);this.data(b,a)},bind:function(){g.unbind.call(this);this.bind("click",
g.click)},unbind:function(){this.unbind("click",g.click)},destroy:function(){this.removeData(b);this.off(b)},show:function(a){g.toggle.call(this,"show",a);a=this.data(b);e.setupButtons.call(a.dialog,a.settings.buttons)},hide:function(){g.toggle.call(this,"hide")},toggle:function(a,c){var d=this.data(b).dialog;e[a].call(d,this,c)},click:function(a){a&&(a.preventDefault(),a.stopPropagation());g.show.call(d(this),{left:a.pageX,top:a.pageY})}};i(b,e);i(b+"Anchor",g);d.fn[b].buttons={};d.fn[b].buttons.ok=
{id:"ok",label:"Ok",action:function(){return!0}};d.fn[b].buttons.cancel={id:"cancel",label:"Cancel",action:function(){return!0}};h.buttons=[d.fn[b].buttons.ok]})(jQuery);
