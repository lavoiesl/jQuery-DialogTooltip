(function(d){var c;function i(a,b){d.fn[a]=function(a){var f=!1;if("object"===typeof a||!a)f=[a],a="init";else if(b[a])f=Array.prototype.slice.call(arguments,1);else return d.error("Method "+a+" does not exist on jQuery."+c),this;return this.each(function(){b[a].apply(d(this),f)})}}c="dialogTooltip";var j={arrow:".arrow",actions_holder:".actions"},h={dialog:!1,buttons:[]},e={init:function(a){var b=this,a=d.extend({},j,a),a={settings:a,actions_holder:d(a.actions_holder,this),arrow:d(a.arrow,this),
holder:this.parent(),documentClick:function(a){0<b.find("*").andSelf().filter(a.target).length||(e.unbindHide.call(b),e.hide.call(b))}};h.dialog=this;this.data(c,a);this.detach()},destroy:function(){this.removeData(c);this.off(c)},show:function(a,b){b||(b=a.offset());this.data(c).target=a;this.detach().appendTo(document.body);e.bindHide.call(this);e.reposition.call(this,b);e.trigger_event.call(this,"show")},reposition:function(a){var b=this.data(c).arrow,b={top:a.top-this.outerHeight()-b.outerHeight(),
left:a.left-b.position().left};this.offset(b);e.trigger_event.call(this,"repositioned",{offset:b,anchor_offset:a})},hide:function(){var a=this.data(c);this.detach().appendTo(a.holder);e.trigger_event.call(this,"hide");this.data(c).target=null},setupButtons:function(a){var b=this.data(c).actions_holder;b.html("");for(var g in a){var f=a[g];if("string"==typeof f&&(f=d.fn[c].buttons[f],!f)){d.error(c+" "+f+" button does not exists");continue}e.setupButton.call(this,b,f)}},setupButton:function(a,b){var c=
this;d('<a href="#" class="button" />').addClass(b.id).html(b.label).click(function(a){a.preventDefault();a=!0;b.action&&(a=b.action(c));e.trigger_event.call(c,"action."+b.id,{close:a});a&&e.hide.call(c)}).appendTo(a);a.append(" ")},trigger_event:function(a,b){this.add(this.data(c).target).trigger(c+"."+a,b)},bindHide:function(){d(document).bind("click",this.data(c).documentClick)},unbindHide:function(){d(document).unbind("click",this.data(c).documentClick)}},g={init:function(a){a=d.extend(h,a);a=
{settings:a,dialog:d(a.dialog)};g.bind.call(this);this.data(c,a)},bind:function(){g.unbind.call(this);this.bind("click",g.click)},unbind:function(){this.unbind("click",g.click)},destroy:function(){this.removeData(c);this.off(c)},show:function(a){var b=this.data(c);e.setupButtons.call(b.dialog,b.settings.buttons);g.toggle.call(this,"show",a)},hide:function(){g.toggle.call(this,"hide")},toggle:function(a,b){var d=this.data(c).dialog;e[a].call(d,this,b)},click:function(a){a&&(a.preventDefault(),a.stopPropagation());
g.show.call(d(this),{left:a.pageX,top:a.pageY})}};i(c,e);i(c+"Anchor",g);d.fn[c].buttons={};d.fn[c].buttons.ok={id:"ok",label:"Ok",action:function(){return!0}};d.fn[c].buttons.cancel={id:"cancel",label:"Cancel",action:function(){return!0}};h.buttons=[d.fn[c].buttons.ok]})(jQuery);
